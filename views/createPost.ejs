<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <!-- Use absolute paths for CSS so they work on any route -->
  <link rel="stylesheet" href="/css/createPost.css" /> <!-- Add the new stylesheet -->
 

  <title>Create Post - Leylit</title>
  
</head>
<body>
  <!-- Navbar -->
  <%- include('partials/navbar') %>
    <div class="container-fluid">
    <div class="row">
      <!-- Sidebar -->
      <div class="col px-0 sidebar-col mr-4"> <!-- px-0 removes padding -->
        <%- include('partials/sidebar') %>
      </div>
    <!-- Main Content -->
    <main class="col main-col" >
      <div  id ="main-content" class="main-content mt-4 d-flex justify-content-center"></div>
            <form id="createPostForm" >
              <div class="mb-3">
                <label id="create-post-label" for="create-post" class="form-label fw-bold">Create Post</label>
                <select id="community-select" class="form-select">
                  <option value="everyone">Select your community</option>
                  <% if (locals.communities && communities.length > 0) { %>
                    <% communities.forEach(function(community) { %>
                      <option value="<%= community._id %>"><%= community.name %></option>
                    <% }); %>
                  <% } else { %>
                    <option value="r/Gaming">r/Gaming</option>
                    <option value="r/Programming">r/Programming</option>
                  <% } %>
                </select>
              </div>

              <div id="post-type-buttons" class="post-type-buttons d-flex gap-2 mb-3">
                <button type="button" id="post-type-text" class="post-type active" data-type="text">
                  <i class="bi bi-file-text"></i> Text
                </button>
                <button type="button" id="post-type-image" class="post-type" data-type="image">
                  <i class="bi bi-image"></i> Image
                </button>
                <button type="button" id="post-type-video" class="post-type" data-type="video">
                  <i class="bi bi-camera-video"></i> Video
                </button>
              </div>
        
              <!-- Text Post Fields -->
              <div id="text-input" class="post-type-input">
                <div class="mb-3">
                  <input type="text" id="post-title" class="form-control" name="title" placeholder="Title *" required>
                </div>
                <div class="mb-3">
                  <textarea id="post-content-text" class="form-control" name="content" rows="6" placeholder="What's on your mind?..."></textarea>
                </div>
              </div>
        
              <!-- Image Post Fields -->
              <div id="image-input" class="post-type-input" style="display:none;">
                <div class="mb-3">
                  <input type="text" id="image-title" name="title" class="form-control" placeholder="Title *">
                </div>
                <label for="image-file" class="file-upload-wrapper">
                  <i class="bi bi-cloud-arrow-up fs-2"></i>
                  <div class="fw-bold">Choose Image to Upload</div>
                  <small class="text-muted">PNG, JPG, or JPEG</small>
                </label>
                <input type="file" id="image-file" name="image-file" accept="image/png, image/jpg, image/jpeg" class="file-upload-input">
                <div id="image-file-name" class="file-name"></div>
                <div id="image-preview" class="file-preview"></div>
              </div>
            
              <!-- Video Post Fields -->
              <div id="video-input" class="post-type-input" style="display:none;">
                <div class="mb-3">
                  <input type="text" id="video-title" name="title" class="form-control" placeholder="Title *">
                </div>
                <label for="video-file" class="file-upload-wrapper">
                  <i class="bi bi-camera-video fs-2"></i>
                  <div class="fw-bold">Choose Video to Upload</div>
                </label>
                <input type="file" id="video-file" name="video-file" accept="video/*" class="file-upload-input">
                <div id="video-file-name" class="file-name"></div>
                <div id="video-preview" class="file-preview"></div>
              </div>
              
              <hr>

              <div class="d-grid">
                <button type="submit" class="submit-button">Submit Post</button>
                
              </div>
            </form>
          </div> 
    </main>
    <div class="col-2 right-col d-none d-lg-block ml-4">
    </div>
  </div>     

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js" integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq" crossorigin="anonymous"></script>
  <!-- Use an absolute path for the JS file as well -->
  <script src="/js/createPost.js"></script>
</body>
</html>